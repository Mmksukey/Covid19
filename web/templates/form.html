<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Covid Risk Predictor</title>
  <style>
    :root{
      --bg:#0b0c10;
      --card:#15171c;
      --muted:#9aa3b2;
      --text:#e7eaf0;
      --brand:#4f8cff;
      --brand-2:#356dff;
      --danger:#ef4444;
      --ok:#22c55e;
      --radius:16px;
    }
    /* Reset แบบไม่ทำร้ายฟอร์มเดิม */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--text);
      -webkit-font-smoothing:antialiased;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    }

    .wrap{
      max-width:680px;margin:0 auto;padding:clamp(16px,4vw,28px);
    }
    header{
      display:flex;align-items:center;gap:12px;margin-bottom:18px;
    }
    .dot{width:10px;height:10px;border-radius:999px;background:var(--brand)}
    h1{font-size:clamp(20px,4.5vw,28px);margin:0}
    p.lead{margin:.25rem 0 1rem;color:var(--muted);font-size:clamp(13px,3.6vw,15px)}

    .card{
      background:var(--card);border-radius:var(--radius);
      padding:clamp(14px,3.6vw,22px);box-shadow:0 10px 24px rgba(0,0,0,.35);
    }

    form{display:grid;gap:14px}
    .grid{display:grid;gap:12px}
    /* มือถือ = 1 คอลัมน์, จอใหญ่ค่อยแตกสองคอลัมน์ */
    @media (min-width: 768px){
      .grid.cols-2{grid-template-columns:1fr 1fr}
    }

    label{display:block;font-size:13px;color:var(--muted);margin:0 0 6px}
    input,select{
      width:100%;
      background:#0f1116;border:1px solid #1f2330;color:var(--text);
      border-radius:12px; padding:14px 14px; font-size:16px; line-height:1.25;
      outline:none; transition:border-color .15s ease, box-shadow .15s ease;
      -webkit-tap-highlight-color: transparent;
    }
    input:focus,select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(79,140,255,.18)}
    input::placeholder{color:#6b7280}

    .hint{font-size:12px;color:#7b8596;margin-top:6px}

    .actions{display:grid;gap:10px;margin-top:4px}
    @media (min-width: 420px){
      .actions{grid-template-columns:1fr auto}
    }
    button{
      appearance:none;border:0;border-radius:12px; padding:14px 18px;
      font-weight:600; font-size:16px; cursor:pointer;
      background:var(--brand); color:white;
      transition:transform .02s ease, background .15s ease, box-shadow .15s ease;
      box-shadow:0 8px 18px rgba(79,140,255,.28);
      width:100%;
    }
    button:active{transform:translateY(1px)}
    .ghost{background:transparent;color:var(--text);border:1px solid #2a2f3e;box-shadow:none}

    /* การ์ดผลลัพธ์ */
    .result{
      margin-top:14px; padding:14px; border-radius:12px;
      background:#10131a; border:1px dashed #243147; color:var(--text)
    }
    .ok{border-color:#1e8f54;background:rgba(34,197,94,.1)}
    .bad{border-color:#9b2c2c;background:rgba(239,68,68,.1)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}

    /* ทำให้พื้นที่แตะใหญ่ขึ้นสำหรับมือถือ */
    .touch-big input,.touch-big select,.touch-big button{min-height:48px}
  </style>
</head>
<body>
  <div class="wrap touch-big">
    <header>
      <span class="dot"></span>
      <div>
        <h1>Covid Risk Predictor</h1>
        <p class="lead">ฟอร์มนี้ถูกจัดเรียงแบบ mobile-first กว้างขึ้นค่อยแตกสองคอลัมน์</p>
      </div>
    </header>

    <div class="card">
      <!-- action="" = โพสต์กลับหน้าเดิม ลดโอกาสพัง route -->
      <form method="post" action="">
        <!-- จัดกลุ่มฟิลด์ทั่วไปไว้ในกริด 2 คอลัมน์บนจอใหญ๋ -->
        <div class="grid cols-2">
          <!-- อย่าลบ name เดิมของคุณ แค่ครอบด้วยคอนเทนเนอร์นี้ก็พอ -->
          <div class="field">
            <label for="age">อายุ</label>
            <input id="age" name="age" type="number" inputmode="numeric" placeholder="เช่น 25" required />
            <div class="hint">ใส่อายุตามจริง เผื่อโมเดลงอแง</div>
          </div>

          <div class="field">
            <label for="sex">เพศ</label>
            <select id="sex" name="sex">
              <option value="male">ชาย</option>
              <option value="female">หญิง</option>
              <option value="other">อื่นๆ</option>
            </select>
          </div>

          <!-- ตัวอย่างฟิลด์เพิ่ม: แทนที่ด้วยของคุณเองได้เลย -->
          <div class="field">
            <label for="fever">มีไข้</label>
            <select id="fever" name="fever">
              <option value="0">ไม่มี</option>
              <option value="1">มี</option>
            </select>
          </div>

          <div class="field">
            <label for="cough">ไอ</label>
            <select id="cough" name="cough">
              <option value="0">ไม่มี</option>
              <option value="1">มี</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button type="submit">ประเมินความเสี่ยง</button>
          <button type="reset" class="ghost">ล้างค่า</button>
        </div>
      </form>

      {% if result %}
      <div class="result {{ 'ok' if result.ok else 'bad' }}">
        <div><strong>ผลลัพธ์:</strong> <span class="mono">{{ result.label }}</span></div>
        {% if result.proba is defined %}
        <div class="hint">ความน่าจะเป็น: {{ '{:.2f}%'.format(result.proba*100) }}</div>
        {% endif %}
      </div>
      {% endif %}
    </div>

    <p class="lead" style="margin-top:14px">ทดสอบบนจอ 320–414px แล้วนิ้วโป้งอยู่รอด ปุ่มสูง 48px ตามคู่มือ human finger</p>
  </div>
</body>
</html>
